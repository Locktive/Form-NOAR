<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./stylesheets/custom_checkbox1.css" />
    <link rel="stylesheet" type="text/css" href="./stylesheets/custom_checkbox2.css" />
    <link rel="stylesheet" type="text/css" href="./stylesheets/floating_label.css" />
    <title>Document</title>
</head>

<body>
    <!-- Criação de uma lista de checkboxes -->
    <div class="checkbox_row">
        <p class="checkbox_text">CAUSADO POR ANIMAIS</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">COM MEIO DE TRANSPORTE</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">DESMORONAMENTO / DESLIZAMENTO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">EMERGÊNCIA MÉDICA</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">QUEDA DE ALTURA 2M</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">TENTATIVA DE SUICÍDIO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">QUEDA PRÓPRIA ALTURA</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">AFOGAMENTO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">AGRESSÃO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">ATROPELAMENTO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">CHOQUE ELÉTRICO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">DESABAMENTO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">DOMÉSTICO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">ESPORTIVO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">INTOXICAÇÃO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">QUEDA DE BICICLETA</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">QUEDA DE MOTO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">QUEDA NÍVEL &lt; 2M </p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">TRABALHO</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <div class="checkbox_row">
        <p class="checkbox_text">TRANSFERÊNCIA</p>
        <label class="custom_checkbox">
            <input type="radio" name="radio_TDO" />
        </label>
    </div>

    <!-- Criação de um campo de texto com rótulo flutuante -->
    <div class="textarea_row">
        <div style="width: 100%;">
            <p class="checkbox_text">OUTRO</p>
            <div class="did-floating-label-content textarea">
                <textarea class="did-floating-input row_textarea" placeholder="Insira o texto"></textarea>
            </div>
        </div>
    </div>

        <script>
  // pega todos os botoes
  const radios = document.querySelectorAll('input[name="radio_TDO"]');
  const textarea = document.querySelector('textarea');
// Restaura state
const savedRadioState = localStorage.getItem('radioState');
const savedTextarea = localStorage.getItem('textarea');
if (savedRadioState) {
    savedRadioState.split('').forEach((state, index) => {
      radios[index].checked = state === '1';
    });
  }
  if (savedTextarea) {
    textarea.value = savedTextarea;
  }

  // evento de mudança de estado
  radios.forEach((radio, index) => {
    radio.addEventListener('change', () => {
      // cria um codigo binario para cada botao
      let binarytdo = '';
      radios.forEach((r, i) => {
        binarytdo += r.checked && i === index ? '1' : '0';
      });

      // Save state
      localStorage.setItem('radioState', binarytdo);
      

      console.log(binarytdo);
    });
  });
   // evento de mudança de estado do textarea
   textarea.addEventListener('input', () => {
    // salva conteudo da area de texto
    localStorage.setItem('textarea', textarea.value);
  });
</script>

</body>

</html>