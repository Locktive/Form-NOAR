<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./images/logo_pequena.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <title><%- title %></title>

    <style>
       

        /* input */
    </style>
</head>

<body>
    <%- include('./partials/cabecalho.ejs') %>
    <br>
    <br>
    <div class="container" style="margin-top: 50px;">

            <div class="row">
                    <p class="col-sm-2">
                     Código da Ocorrência
                    </p>
                    <p class="col-sm-2">Data do ocorrido</p>
                <p class="col-sm-2">Data de ultima alteração</p>
           <p class="col-sm-4">Criador do relatorio </p>
                <p class="col-sm-2">Acesso</p>
            </div>
            <% for( let index = 0; index < data.length; index++ ) { %>
     <br>
            
            <div class="row main">
                <input type="hidden" name="<%= index + 1 %>" value="<%= data[index].criador_relatorio %>">
                <div class="col-sm-2">
                 <%- data[index].cod_relatorio %>
                </div>
              <div class="col-sm-2">
                <%- data[index].data_relatorio %>
            </div>
             
            <div class="col-sm-2">
                <%- data[index].ultima_alteracao %>
            </div>
            <div name="nome" class="col-sm-4">
                <%- Nome %>
            </div>
            <div class="col-sm-2">
                <a href="/ocview?relatorio=<%= data[index].id_relatorio %>&paciente=<%- data[index].fk_paciente %>&observ=<%- data[index].fk_observacoes %>&avacine=<%- data[index].fk_avaliacaocinematica %>&dct=<%- data[index].fk_decisaotransporte %>&fc=<%- data[index].fk_formadeconducao %>&obj=<%- data[index].fk_objetorecolhido %>&pbs=<%- data[index].fk_prob_encontrados_suspeitos %>&pe=<%- data[index].fk_procedimentos_efetuados %>&ss=<%- data[index].fk_sinais_sintomas %>&glasgow=<%- data[index].fk_teste_glasgow %>&tpo=<%- data[index].fk_tipo_ocorrencia_pre_hospitalar %>&vte=<%- data[index].fk_vitima_era %>&ferimentos=<%- data[index].fk_ferimentos_corpo %>&final=<%- data[index].fk_finalizacao %>&anamnemer=<%- data[index].fk_anamne_emergencial %>&anamnegesta=<%- data[index].fk_anamne_gestacional %>&mtehosp=<%- data[index].fk_materiais_hospital %>&mtedesc=<%- data[index].fk_materiais_descarte %>&sv=<%- data[index].fk_sinais_vitais %>" class="btn btn-primary">Acessar</a>
            </div>
        </div>
        <br>
        <br>
        <% } %>
    </div>
        <%- include('./partials/footer.ejs') %>
        <script>
             // Seleciona o elemento select
  var select = document.getElementById('bombeiros');

// Seleciona todas as divs de relatório
var reportDivs = document.querySelectorAll('.main');

// Adiciona um ouvinte de evento para o evento change
select.addEventListener('change', function() {
  // Obtém o valor selecionado
  var selectedValue = event.target.value;
    console.log(selectedValue);
  // Mostra a div de relatório correspondente e oculta todas as outras
  reportDivs.forEach(function(div, index) {
    var idcor = index + 1;
    console.log(idcor);
    var value = div.querySelector('input[name="'+ idcor +'"]').value;

    console.log(value);
    if (selectedValue == 0 || value == selectedValue) {
      div.style.display = 'flex';
    } else {
      div.style.display = 'none';
    }
  });
});
        </script>
</body>

</html>